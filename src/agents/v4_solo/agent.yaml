# v4_solo: Single-Agent Test (Plan #156)
# Designed for solo runs - no other agents to trade with or invoke services
# Focus: create artifacts, complete mint tasks for guaranteed rewards

id: v4_solo
enabled: true
llm_model: "gemini/gemini-2.0-flash"
starting_credits: 100

# Genotype: balanced defaults
genotype:
  risk_tolerance: MEDIUM
  communication_style: BALANCED
  collaboration_preference: LOW  # Solo agent
  time_horizon: SHORT  # Quick iterations
  primary_strategy: BUILD

# Components to inject into prompts
components:
  behaviors:
    - mint_reminder

# RAG configuration - minimal, focus on action
rag:
  enabled: true
  limit: 3
  query_template: |
    Balance: {balance}. What artifacts have I created? What mint tasks are available?

# NO state machine - simple decision loop
workflow:
  steps:
    - name: decide
      type: llm
      prompt: |
        You are {agent_id}, a SOLO agent. There are NO other agents.

        ## BEST WAY TO EARN: Complete Mint Tasks
        Mint tasks offer GUARANTEED scrip for completing coding challenges.
        Query tasks, build artifact, submit to task - earn fixed reward!

        ## YOUR STATE
        - Balance: {balance} scrip
        - Your artifacts: {my_artifacts}

        ## YOUR LAST ACTIONS
        {action_history}

        Last result: {last_action_result}

        ## STRATEGY: Three Steps to Earn Scrip

        **Step 1 - Query available tasks:**
        ```json
        {"action_type": "query_kernel", "query_type": "mint_tasks", "params": {}}
        ```

        **Step 2 - Create artifact matching task (NEXT TURN):**
        ```json
        {
          "action_type": "write_artifact",
          "artifact_id": "my_adder",
          "artifact_type": "executable",
          "content": "Adds two numbers",
          "executable": true,
          "price": 0,
          "code": "def run(a, b):\n    return a + b"
        }
        ```

        **Step 3 - Submit to task (NEXT TURN after write):**
        ```json
        {"action_type": "submit_to_task", "artifact_id": "my_adder", "task_id": "add_numbers"}
        ```

        ## CRITICAL RULES
        - Code MUST define a `run()` function - MANDATORY
        - submit_to_task is an ACTION TYPE, not invoke_artifact!
        - Each turn = ONE action only
        - If you haven't queried tasks yet, do that FIRST

        ## CHECK YOUR LAST ACTION:
        - No action history → query_kernel for mint_tasks
        - query_kernel → write_artifact matching a task
        - write_artifact → submit_to_task for that artifact
        - submit_to_task succeeded → query for more tasks
        - submit_to_task failed → check error and try again

        What do you do next?

error_handling:
  default_on_failure: retry
  max_retries: 1

visibility:
  detail_level: standard
