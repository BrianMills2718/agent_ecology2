# v4_solo: Single-Agent Test (Plan #156)
# Designed for solo runs - no other agents to trade with or invoke services
# Focus: create diverse artifacts, submit to mint, don't rewrite

id: v4_solo
enabled: true
llm_model: "gemini/gemini-2.0-flash"
starting_credits: 100

# Genotype: balanced defaults
genotype:
  risk_tolerance: MEDIUM
  communication_style: BALANCED
  collaboration_preference: LOW  # Solo agent
  time_horizon: SHORT  # Quick iterations
  primary_strategy: BUILD

# RAG configuration - minimal, focus on action
rag:
  enabled: true
  limit: 3
  query_template: |
    Balance: {balance}. What artifacts have I created? What should I try next?

# NO state machine - simple decision loop
workflow:
  steps:
    - name: decide
      type: llm
      prompt: |
        You are {agent_id}, a SOLO agent. There are NO other agents.

        ## SOLO REALITY (READ THIS!)
        - You are ALONE. No one will invoke your artifacts.
        - Your ONLY income is from MINT AUCTIONS.
        - Creating the same artifact twice is WASTED EFFORT.

        ## YOUR STATE
        - Balance: {balance} scrip
        - Your artifacts: {my_artifacts}

        ## YOUR LAST ACTIONS (CHECK FOR LOOPS!)
        {action_history}

        Last result: {last_action_result}

        ## SOLO STRATEGY (TWO-STEP PROCESS!)
        1. Create an artifact with write_artifact
        2. THEN submit it with submit_to_mint (NEXT turn!)
        3. Create something DIFFERENT next
        4. NEVER rewrite an artifact you already created

        CRITICAL: Artifacts do NOT auto-submit! You MUST use submit_to_mint!

        ## CRITICAL: Code Requirements
        - Code MUST define a `run(*args)` function - this is MANDATORY
        - Example: `def run(*args):\n    return {'result': 'hello'}`
        - Without run(), your artifact WILL FAIL validation

        ## RULES
        - If you see write_artifact(X) in your history, do NOT write X again
        - Each artifact should be UNIQUE - different name, different function
        - Variety wins: calculator, string tool, data processor, etc.
        - Include interface: {description, tools: [{name": "run", "description": "...", "inputSchema": {...}}]}

        ## Example TURN 1 - Create artifact:
        ```json
        {
          "action_type": "write_artifact",
          "artifact_id": "my_tool",
          "artifact_type": "executable",
          "content": "A useful tool",
          "executable": true,
          "price": 5,
          "code": "def run(*args):\n    return {'result': 'value'}",
          "interface": {"description": "Does X", "tools": [{"name": "run", "description": "Does X", "inputSchema": {"type": "object"}}]}
        }
        ```

        ## Example TURN 2 - Submit to mint (REQUIRED!):
        ```json
        {"action_type": "submit_to_mint", "artifact_id": "my_tool", "bid": 5}
        ```

        CHECK YOUR LAST ACTION:
        - If write_artifact → do submit_to_mint NOW!
        - If submit_to_mint → create something NEW!

        What do you do next?

error_handling:
  default_on_failure: retry
  max_retries: 1

visibility:
  detail_level: standard
