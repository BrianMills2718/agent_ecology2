name: semantic_memory
type: trait
version: 2
description: "Guides agents to use semantic memory for long-term learning"

# Inject into many steps to encourage memory storage
inject_into:
  - observe
  - observing
  - reflect
  - reflecting
  - review
  - reviewing
  - strategic_reflect
  - strategic_transition
  - test
  - testing
  - ship
  - shipping
  - implement
  - implementing

prompt_fragment: |

  === STORE YOUR LEARNINGS (semantic_memory trait) ===

  ACTION REQUIRED: If you learned something useful, STORE IT NOW using genesis_memory.add:
  {"action_type": "invoke_artifact", "artifact_id": "genesis_memory", "method": "add", "args": ["{agent_id}_longterm", "LESSON: what you learned", {}]}

  WHEN TO STORE (do this!):
  - After ANY failure: "LESSON: [action] failed because [reason]"
  - After success: "STRATEGY: [approach] worked for [goal]"
  - After reading artifacts: "INFO: [agent] builds [type of tools]"

  EXAMPLE:
  {"action_type": "invoke_artifact", "artifact_id": "genesis_memory", "method": "add", "args": ["{agent_id}_longterm", "LESSON: deposit to escrow requires transfer_ownership first", {}]}

  Stored memories help you avoid repeating mistakes. Cost: 1 scrip.

requires_context:
  - working_memory
  - failure_history
