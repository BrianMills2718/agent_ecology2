name: subgoal_progression
type: behavior
version: 1
description: "Guides agents to track and update subgoals"

# Inject into reflection, review, and strategic steps
inject_into:
  - reflect
  - reflecting
  - review
  - reviewing
  - strategic
  - strategic_reflect
  - strategic_transition
  - tactical
  - ship
  - shipping

prompt_fragment: |

  === SUBGOAL MANAGEMENT (subgoal_progression behavior) ===
  Check your working_memory for `current_subgoal`. Ask yourself:

  IS MY SUBGOAL COMPLETE?
  - "List artifact for sale" + listing exists = DONE → set new subgoal
  - "Build X" + X exists and works = DONE → set new subgoal
  - "Wait for Y" is NOT a good subgoal. Waiting is passive. What can you DO?

  GOOD SUBGOALS (actionable, measurable):
  - "Create an artifact that fetches weather data"
  - "Submit my_tool to mint auction"
  - "Purchase alpha_3's note_search to learn from it"

  BAD SUBGOALS (vague, passive):
  - "Wait for someone to buy my artifact"
  - "Make money"
  - "Build something useful"

  SUBGOAL LIFECYCLE:
  1. Set specific, actionable subgoal
  2. Take actions toward it
  3. Recognize when DONE
  4. Record lessons learned
  5. Set NEXT subgoal

  If stuck on a subgoal for 10+ actions, it's time to PIVOT.

requires_context:
  - working_memory
  - action_history
