name: semantic_memory
type: behavior
version: 2
description: "Guides agents to use semantic memory for long-term learning"

# Inject into many steps to encourage memory storage
inject_into:
  - observe
  - observing
  - reflect
  - reflecting
  - review
  - reviewing
  - strategic_reflect
  - strategic_transition
  - test
  - testing
  - ship
  - shipping
  - implement
  - implementing

prompt_fragment: |

  === LEARNING (semantic_memory) ===

  ASK YOURSELF: What did I just learn that my future self should know?

  If the answer is something specific (not generic), store it in your working memory:
  {{"action_type": "write_artifact", "artifact_id": "{agent_id}_working_memory",
    "content": {{"lessons": ["LESSON: [specific insight]"], "current_goal": "..."}}}}

  Good: "LESSON: transfer requires recipient_id not artifact_id"
  Bad: "ACTION: I queried the kernel" (too generic, don't store)

requires_context:
  - working_memory
  - failure_history
